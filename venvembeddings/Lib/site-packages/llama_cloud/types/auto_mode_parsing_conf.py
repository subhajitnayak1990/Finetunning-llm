# This file was auto-generated by Fern from our API Definition.

import datetime as dt
import typing

from ..core.datetime_utils import serialize_datetime
from .auto_mode_crop_box import AutoModeCropBox
from .auto_mode_ignore_options import AutoModeIgnoreOptions
from .auto_mode_parsing_conf_specialized_chart_parsing import AutoModeParsingConfSpecializedChartParsing
from .auto_mode_parsing_conf_tier import AutoModeParsingConfTier
from .auto_mode_parsing_conf_version import AutoModeParsingConfVersion
from .auto_mode_presentation_options import AutoModePresentationOptions
from .auto_mode_spatial_text_options import AutoModeSpatialTextOptions

try:
    import pydantic
    if pydantic.__version__.startswith("1."):
        raise ImportError
    import pydantic.v1 as pydantic  # type: ignore
except ImportError:
    import pydantic  # type: ignore


class AutoModeParsingConf(pydantic.BaseModel):
    """
    Configuration for parsing in auto mode (V2 format).

    This uses V2 API naming conventions. The backend service will convert
    these to the V1 format expected by the llamaparse worker.
    """

    adaptive_long_table: typing.Optional[bool]
    aggressive_table_extraction: typing.Optional[bool]
    crop_box: typing.Optional[AutoModeCropBox]
    custom_prompt: typing.Optional[str]
    extract_layout: typing.Optional[bool]
    high_res_ocr: typing.Optional[bool]
    ignore: typing.Optional[AutoModeIgnoreOptions]
    language: typing.Optional[str]
    outlined_table_extraction: typing.Optional[bool]
    presentation: typing.Optional[AutoModePresentationOptions]
    spatial_text: typing.Optional[AutoModeSpatialTextOptions]
    specialized_chart_parsing: typing.Optional[AutoModeParsingConfSpecializedChartParsing]
    tier: typing.Optional[AutoModeParsingConfTier]
    version: typing.Optional[AutoModeParsingConfVersion] = pydantic.Field(
        description="Version of the tier configuration"
    )

    def json(self, **kwargs: typing.Any) -> str:
        kwargs_with_defaults: typing.Any = {"by_alias": True, "exclude_unset": True, **kwargs}
        return super().json(**kwargs_with_defaults)

    def dict(self, **kwargs: typing.Any) -> typing.Dict[str, typing.Any]:
        kwargs_with_defaults: typing.Any = {"by_alias": True, "exclude_unset": True, **kwargs}
        return super().dict(**kwargs_with_defaults)

    class Config:
        frozen = True
        smart_union = True
        json_encoders = {dt.datetime: serialize_datetime}
